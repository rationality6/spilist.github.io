---
title: "디버그를 디버깅하기: 디버그라는 단어의 함정"
tags: ["Software Development", "Debugging", "Problem Solving"]
---

오래되고 기능이 많은 레거시 소프트웨어를 관리하는 조직에서, 신규 기능을 추가하기보다는 여기저기서 터져나오는 문제를 해결하는데 시간을 훨씬 많이 쓰게 되는 경우가 있다. 특히 프로젝트 초기에 좋은 시스템 구조가 설계되지 않았거나, 프로젝트 도중 적절한 리팩토링을 거치지 않았거나, 또는 테스트 코드가 마련되지 않은 상태에서 개발이 진행되다 보면 그리 오랜 시간이 지나지 않아 이런 상황이 되기가 쉽다. 이런 조직이 다시 개발 생산성을 높이기 위해서는 문제가 생겼을 때 단순히 그 문제를 빠르게 해결하기보다는 좀더 체계적인 방법으로 디버깅을 해야 한다. 그러면 어떻게 디버깅을 체계적으로 할 수 있을까.

###디버깅은 단순히 버그를 없애는 것이 아니다

[위키피디아](https://en.m.wikipedia.org/wiki/Software_bug)에 따르면 '버그'라는 용어는 1870년대부터 기계적 결함을 나타내는 용어로 쓰이긴 했었다. 하지만 컴퓨터 영역에서는, 1940년대에 [하버드 마크 II](https://en.m.wikipedia.org/wiki/Harvard_Mark_II)라는 초창기의 컴퓨터가 나방이 패널에 끼는 바람에 오작동한 사건을 기록한 것에서부터 '버그Bug'와 '디버깅Debugging'이라는 용어가 널리 쓰이기 시작했다고 한다.

![The very first recorded computerxbug](https://cdn0.tnwcdn.com/wp-content/blogs.dir/1/files/2013/09/bug.jpg)

*최초로 기록된 컴퓨터 버그.*

나는 이 **디버깅**이라는 단어 자체가 일종의 함정을 지니고 있다고 느낀다. 디버그라는 말을 들었을 때 가장 쉽게 연상되는 것은 de + bug, 즉 **버그를 없앤다**는 뜻이다(실제로 최초의 버그는 패널에 낀 나방을 제거함으로써 해결했을 것이다). 그래서인지 경험이 적은 개발자일수록 디버깅할 때 버그를 없애는 것에만 집중하는 경향을 보이는 듯하다. 존경하는 개발자인 [김정훈](https://wonderer80.github.io/) 님으로부터 몇년 전 이런 얘기를 듣기 전까지, 나도 그런 개발자였다. 

> 훌륭한 개발자와 일반적인 개발자는 버그를 대하는 태도가 다릅니다. 버그를 만났을 때 일반적인 개발자는 짜증내며 빠르게 고치려고 합니다. 같은 상황에서, 훌륭한 개발자는 버그를 버그가 생길 수밖에 없었던 근본적 원인을 생각해보고 리팩토링하는 기회로 삼습니다. 

정훈님이 당시 수많은 함수들이 들어있는 `general.js` 에서 이해할 수 없는 문제가 생겨서, 무수히 `console.log`를 찍어가며 디버깅하던 나를 보며 말씀하셨던 걸로 기억한다. 결국 찾아낸 내 문제의 원인은 변수 이름에 있던 오타였다. 정훈님은 오타를 고치는 게 아니라 파일명, 변수명을 비롯한 코드 구조 자체를 바꿔야 한다고 말씀하셨다. 이런 근본적인 문제가 해결되어야 나중에 비슷한 문제가 생길 가능성이 줄어든다면서.

'버그가 생길 수밖에 없었던 근본적 원인을 찾아 개선한다'는 말은 무척 놀라웠고 내 머릿속에 깊이 새겨졌다. 그리고 이 말을 내 안에서 오랫동안 숙성시킴으로써 나만의 디버깅 템플릿 겸 체크리스트를 만들어낼 수 있었다. 핵심은 디버깅을 **현상**, **문제 원인**, **해결법**, **환경 개선**의 네 단계로 나누는 것이다.

###1. 현상

현상 단계에서 중요한 것은 사실을 기록하는 것이다. 예를 들어 "A 페이지에서 B 문제가 있어요"라는 리포트를 받았을 때, "어 이거 최근에 배포된 C 때문인 것 같은데요?"와 같이 그 순간 문제 원인이 생각날 수도 있는데, 일단 참고 객관적인 사실만 기록한다. 구체적인 질문 목록은 다음과 같다.

**1-1. 누가, 어디서, 어떤 문제 현상을 겪었는가?**

나의 현재 업무 영역인 웹 프론트엔드 영역에서는 이걸 이렇게 바꿀 수 있다. 
- 누가: 유저의 권한이 무엇인가?
- 어디서: OS 버전은? 브라우저 버전은? 배포된 앱 버전은? 네트워크 환경은? 어느 페이지에서?
- 문제 현상: 어떤 액션을 수행했는가? 이 때 예상 결과는 무엇이었는가? 실제 결과는?
- 실제로 문제를 겪은 사람의 리포트 링크, 문제 상황 스크린샷, 에러 로그 등의 데이터는 따로 기록해두는 게 좋다.

**1-2. 현상이 발생하는 조건은 무엇인가?**

1-1을 더 파고들어 문제를 재현할 수 있는 조건을 구체화한다. 당연한 얘기지만, 명확한 재현 조건 없이는 문제가 해결됐음을 확신할 수 없다. 대개 문제 액션을 고정한 채 다른 조건을 바꿔보면서, 문제가 어떨 때 생기고 어떨 때 생기지 않는지를 관찰하는 식으로 재현 조건을 찾는다.

- '누가'를 바꿔본다. 다른 권한의 유저에게도 발생하는가?
- '어디서'를 바꿔본다. 다른 OS, 다른 브라우저, 다른 앱 버전에서도 발생하는가? 네트워크 환경이 바뀌면 어떤가? 
- 문제 액션을 실행하기까지의 플로우를 바꿔본다. 문제 액션 이전에 어떤 액션을 했느냐에 따라 앱의 상태가 바뀔 수 있어서이다. 
- 비슷한 액션인데 문제가 발생하지 않는 상황, 그리고 비슷한 문제가 다른 조건에서 발생하는 상황은 없는지 탐색한다.

실제로 직장에서 내가 겪었던 문제를 예시로 들어보자. 



- 문제 해결(디버깅) 템플릿 겸 체크리스트
- 디버그의 어원
  - 
  - https://thenextweb.com/shareables/2013/09/18/the-very-first-computer-bug/
  - 벌레가 낌. 벌레를 제거
  - 벌레가 끼지 않게 하는 환경
  - 벌레가 꼈을 때 알 수 있게 함
  - 벌레를 자동으로 주기적으로 청소
- 디버그라는 단어에서 연상되는 것은 버그를 제거하는 것. 실제로 많은 개발자들이 그냥 버그를 없애는 데 집중한다. 
- 정훈님의 말. 
  - 훌륭한 개발자는 버그를 만났을 때 그걸 단지 빠르게 고치는 게 아니라, 버그가 생길 수밖에 없었던 근본적 원인을 생각해보고 개선하는 기회로 삼는다.
- 훌륭한 개발자는 저 과정이 자동으로 될 수 있겠지만 나같은 평범한 개발자는 분석적으로 접근해야 함
- 디버그를 5단계로 나눈다.
  - 현상
  - 재현 조건
  - 문제 원인
  - 해결 방법
  - 환경 개선
- 버그의 시초와, 내가 실제로 겪은 버그로 예시. 
- 체크리스트.
- 버그에서 환경 개선으로 가려면 패턴을 찾는 훈련이 필요. 이건 다음 글에서.